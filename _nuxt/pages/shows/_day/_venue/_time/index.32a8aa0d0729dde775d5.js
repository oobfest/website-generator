webpackJsonp([7],{"4L9O":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".form[data-v-0065bb24]{max-width:500px;margin:0 auto}",""])},"6DME":function(t,e,a){"use strict";var s=a("Z8yo"),i=a("kAcT"),n=!1;var o=function(t){n||a("V6rl")},r=a("VU/8")(s.a,i.a,!1,o,"data-v-0065bb24",null);r.options.__file="components/PayPal.vue",e.a=r.exports},HNBw:function(t,e,a){var s=a("TK4+");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("3ed8cd2f",s,!1,{sourceMap:!1})},R8YN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("t2x8"),i=a("iTt9"),n=a("VU/8")(s.a,i.a,!1,null,null,null);n.options.__file="pages/shows/_day/_venue/_time/index.vue",e.default=n.exports},"TK4+":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".modal-act-name{font-size:24px;font-size:1.5rem}.modal-act-description{font-size:16px;font-size:1rem}.formy{width:100%;max-width:500px}",""])},V6rl:function(t,e,a){var s=a("4L9O");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("42f813b6",s,!1,{sourceMap:!1})},Z4UN:function(t,e,a){"use strict";var s=a("mtWM"),i=a.n(s),n=a("6DME");e.a={components:{paypal:n.a},props:["show","acts"],data:function(){return{state:0,email:"",quantity:1,remaining:0,clickCounter:0}},computed:{modalSize:function(){return 0==this.state||2==this.state?"lg":"md"}},methods:{paid:function(t){this.email=t,this.state=2},shown:function(){var t=this;return i.a.get("https://app.oobfest.com/api/shows/get-remaining-tickets/"+t.show._id).then(function(e){t.remaining=Number(e.data.remaining)}).catch(function(t){alert("Error getting ticket data"),console.log(t)})},reserveWithBadge:function(t){if(""==this.email)return alert("Please enter email");var e=this;i.a.post("https://app.oobfest.com/api/shows/badge-reservation/"+t,{email:e.email,quantity:e.quantity}).then(function(t){t.data.reservationSuccessful?e.state++:alert(t.data.message)}).catch(function(t){alert("Error reserving for show with badge :("),console.log(t),this.reset()})},reset:function(){this.state=0,this.quantity=1},formatVenue:function(t){switch(t){case"Hideout Up":return"Hideout Upstairs";case"Hideout Down":return"Hideout Downstairs";case"ColdTowne":return"ColdTowne";case"Fallout":return"Fallout";case"Velveeta":return"Velveeta";case"Spider House":return"Spider House";case"Institution":return"Institution"}},formatTime:function(t){return(t=String(t)).slice(0,t.length-2)+":"+t.slice(t.length-2)+"pm"},formatActType:function(t){return"Individual"==t?"Sketch":t}}}},Z8yo:function(t,e,a){"use strict";var s=a("mtWM"),i=a.n(s);e.a={props:["showId","remaining"],data:function(){return{ticket:{name:"",email:"",phone:"",quantity:1}}},methods:{isValid:function(){return""!=this.ticket.name&&""!=this.ticket.email&&""!=this.ticket.phone},validate:function(t){this.isValid()?t.enable():t.disable()},onChange:function(t){document.querySelector("#paypal-name").addEventListener("change",t),document.querySelector("#paypal-email").addEventListener("change",t),document.querySelector("#paypal-phone").addEventListener("change",t)}},mounted:function(){var t=this;paypal.Button.render({env:"production",commit:!0,style:{layout:"vertical",size:"medium",shape:"rect",color:"gold"},funding:{allowed:[paypal.FUNDING.CARD],disallowed:[paypal.FUNDING.CREDIT]},validate:function(e){t.validate(e),t.onChange(function(){t.validate(e)})},onClick:function(){!t.isValid()&&alert("Please fill in all fields")},payment:function(e,a){return i.a.post("https://app.oobfest.com/api/paypal/create-ticket-sale/"+t.showId,t.ticket).then(function(t){return t.data.id}).catch(function(t){alert("Payment creation failed, show may have sold out!"),console.log(t)})},onAuthorize:function(e,a){return a.payment.get().then(function(a){var s={paymentId:e.paymentID,payerId:e.payerID,ticket:t.ticket};return i.a.post("https://app.oobfest.com/api/paypal/execute-ticket-sale/"+t.showId,s).then(function(e){t.$emit("paid")}).catch(function(t){alert("Payment execution failed"),console.log(t)})})},onError:function(t){console.log("Error")}},"#paypal-button")}}},aucw:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"showModal",attrs:{id:"show-modal",size:t.modalSize,"hide-footer":""},on:{hidden:t.reset,shown:t.shown}},[a("template",{slot:"modal-header"},[a("span",[t._v(t._s(t.show.day)+", "+t._s(t.formatVenue(t.show.venue))+" at "+t._s(t.formatTime(t.show.time)))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){t.$refs.showModal.hide()}}},[t._v("×")])]),a("div",{staticClass:"mt-2"},[a("section",{directives:[{name:"show",rawName:"v-show",value:0==t.state,expression:"state==0"}]},[a("ul",{staticClass:"list-unstyled"},t._l(t.show.acts,function(e){return a("li",{staticClass:"media"},[e.imageUrl?a("img",{staticClass:"mr-3 align-self-center",attrs:{src:e.imageUrl+"b.jpg"}}):t._e(),a("div",{staticClass:"media-body align-self-center"},[a("h2",{staticClass:"modal-act-name"},[t._v(t._s(e.name)),a("small",[t._v("— "+t._s(t.formatActType(e.type)))])]),e.city?a("h5",[t._v(t._s(e.city)+", "+t._s(e.state))]):t._e(),a("p",{staticClass:"modal-act-description"},[t._v(t._s(e.description))])])])})),"5b1ec986bd40f900140ae3a7"==t.show._id?a("div",{staticClass:"text-center"},[a("p",[t._v("Shit-Faced Shakespeare is an independent show! Please purchase tickets to their show from "),a("a",{staticStyle:{color:"#f9a01b"},attrs:{href:"https://www.shit-facedshakespeare.com/tickets-for-austin-shows--atx.html",target:"_blank"}},[t._v("their website")])])]):a("div",[t.remaining<=0?a("div",{staticClass:"text-right"},[a("strong",{staticClass:"text-danger"},[t._v("This show is sold out!")])]):a("div",[a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.$refs.showModal.hide()}}},[t._v("Cancel")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.state=3}}},[t._v("Buy Tickets – $"+t._s(t.show.price))]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.state++}}},[t._v("Reserve with Badge")])])])])]),a("section",{directives:[{name:"show",rawName:"v-show",value:1==t.state,expression:"state==1"}]},[a("div",{staticClass:"form-group"},[a("label",[t._v("Badge Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("Quantity")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"custom-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.quantity=e.target.multiple?a:a[0]}}},[a("option",[t._v("1")]),a("option",[t._v("2")]),a("option",[t._v("3")])])]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.state--}}},[t._v("Back")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.reserveWithBadge(t.show._id)}}},[t._v("Make Reservation")])])]),a("section",{directives:[{name:"show",rawName:"v-show",value:2==t.state,expression:"state==2"}]},[a("div",{staticClass:"text-center"},[a("h2",[t._v("Success!")]),a("p",[t._v("A confirmation email has been sent to  "),a("span",{staticClass:"code"},[t._v(t._s(t.email))])])]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.$refs.showModal.hide()}}},[t._v("Close")])])]),a("section",{directives:[{name:"show",rawName:"v-show",value:3==t.state,expression:"state==3"}]},[a("paypal",{attrs:{"show-id":t.show._id,remaining:t.remaining},on:{paid:t.paid}}),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.state=0}}},[t._v("Back")])])],1)])],2)};s._withStripped=!0;var i={render:s,staticRenderFns:[]};e.a=i},iTt9:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("show-modal",{attrs:{show:t.show}}),a("h2",[t._v(t._s(t.show.day)+" at "+t._s(t.show.venue)+", "+t._s(t.formatTime(t.show.time)))]),a("ul",t._l(t.show.acts,function(e){return a("li",[t._v(t._s(e.name)),a("small",[t._v("— "+t._s(e.type))])])})),a("button",{directives:[{name:"b-modal",rawName:"v-b-modal.show-modal",modifiers:{"show-modal":!0}}],staticClass:"btn btn-primary"},[t._v("Get Tickets")])],1)};s._withStripped=!0;var i={render:s,staticRenderFns:[]};e.a=i},kAcT:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form"},[a("script",{attrs:{src:"https://www.paypalobjects.com/api/checkout.js"}}),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("Name ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ticket.name,expression:"ticket.name"}],staticClass:"form-control",attrs:{id:"paypal-name",type:"text"},domProps:{value:t.ticket.name},on:{input:function(e){e.target.composing||t.$set(t.ticket,"name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ticket.email,expression:"ticket.email"}],staticClass:"form-control",attrs:{id:"paypal-email",type:"email"},domProps:{value:t.ticket.email},on:{input:function(e){e.target.composing||t.$set(t.ticket,"email",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"phone"}},[t._v("Phone Number")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ticket.phone,expression:"ticket.phone"}],staticClass:"form-control",attrs:{id:"paypal-phone",type:"tel"},domProps:{value:t.ticket.phone},on:{input:function(e){e.target.composing||t.$set(t.ticket,"phone",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"quantity"}},[t._v("Quantity")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ticket.quantity,expression:"ticket.quantity"}],staticClass:"custom-select",attrs:{id:"paypal-quantity",name:"quantity"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.ticket,"quantity",e.target.multiple?a:a[0])}}},t._l(t.remaining,function(e){return a("option",[t._v(t._s(e))])}))]),t._m(0)])};s._withStripped=!0;var i={render:s,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"}),e("div",{staticClass:"col-6"},[e("div",{attrs:{id:"paypal-button"}})])])}]};e.a=i},q4l9:function(t,e,a){"use strict";var s=a("Z4UN"),i=a("aucw"),n=!1;var o=function(t){n||a("HNBw")},r=a("VU/8")(s.a,i.a,!1,o,null,null);r.options.__file="components/ShowModal.vue",e.a=r.exports},t2x8:function(t,e,a){"use strict";var s=a("Xxa5"),i=a.n(s),n=a("exGp"),o=a.n(n),r=a("q4l9");e.a={components:{ShowModal:r.a},asyncData:function(){var t=o()(i.a.mark(function t(e){e.params,e.error;var a=e.payload;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=4;break}return t.abrupt("return",{show:a});case 4:return t.abrupt("return",{show:{acts:[]}});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),methods:{formatTime:function(t){return(t=String(t)).slice(0,t.length-2)+":"+t.slice(t.length-2)+"pm"}}}}});